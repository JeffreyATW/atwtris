!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=5)}([function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});e.__esModule=!0;var i=r(3),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getRotatedGrid=function(t){return void 0===t&&(t=0),i(this.grid,(this.rotation+t)%2)},e}(r(1).default);e.default=u},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(){this.rotation=0}return t.prototype.getRotatedGrid=function(t){return void 0===t&&(t=0),this.grid},t}();e.default=n},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(){}return t.prototype.text=function(){return"O"},t}();e.default=n},function(t,e,r){!function(r){"use strict";function n(t,e){if(!(Array.isArray(t)&&t.length>0))return[];if("number"!=typeof e)e=1;else{if(0===e)return t;e%=4}var r,n;for(r=n=t;0!==e;){n=[];for(var o=0,i=r.length;o<i;o++){for(var u=0,a=r[o].length;u<a;u++){if(i!==a)return[];n[o]=n[o]||[],n[o][u]=r[u][o]}e>0&&(n[o]=n[o].reverse())}e<0?(n.reverse(),e++):e--,r=n}return n}t.exports&&(e=t.exports=n),e.rotateMatrix=n}()},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});e.__esModule=!0;var i=r(3),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getRotatedGrid=function(t){return void 0===t&&(t=0),i(this.grid,this.rotation+t)},e}(r(1).default);e.default=u},function(t,e,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var i=arguments[e],u=0,a=i.length;u<a;u++,o++)n[o]=i[u];return n};e.__esModule=!0;var o=r(6),i=r(10),u=r(17),a=new o.default,f=new i.default,c=null,s=0,p=0;window.addEventListener("keydown",(function(t){s=0,c=t.keyCode})),window.addEventListener("keyup",(function(t){c===t.keyCode&&(s=0,c=null)}));var l=document.querySelector("pre"),_=[u.default.LEFT,u.default.RIGHT],d=n(_,[u.default.DOWN]),h=[u.default.Z,u.default.X],v=n(d,h,[u.default.UP]),y=setInterval((function(){var t=!1;if(a.activeTetromino?v.includes(c)&&(0===s&&(s=p),d.includes(c)?(p-s)%6==0&&(_.includes(c)?t=a.move(c===u.default.LEFT?-1:1):c===u.default.DOWN&&(t=a.softDrop())):h.includes(c)?s===p&&(t=a.rotate(c===u.default.Z?-1:1)):c===u.default.UP&&s===p&&(t=a.hardDrop())):a.setActiveTetromino(f.pop())?t=!0:(alert("Game over!"),clearInterval(y)),t){var e="",r=a.getGrid();r.forEach((function(t,n){0===n&&(e+="_",t.forEach((function(){e+="_"})),e+="_\n"),e+="|",t.forEach((function(t){e+=t.text()})),e+="|\n",n===r.length-1&&(e+="‾",t.forEach((function(){e+="‾"})),e+="‾")})),l.innerText=e}p+=1}),1e3/60)},function(t,e,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var i=arguments[e],u=0,a=i.length;u<a;u++,o++)n[o]=i[u];return n};e.__esModule=!0;var o=r(7),i=r(2),u=r(8),a=r(9),f=function(){function t(){this.grid=Array.apply(null,new Array(20)).map((function(){return Array.apply(null,new Array(10)).map((function(){return new o.default}))}))}return t.prototype.getGrid=function(t){if(void 0===t&&(t=!1),!this.activeTetromino)return this.grid;var e=this.activeTetromino,r=e.tetromino,f=e.x,c=e.y,s=n(this.grid).map((function(t){return n(t)})),p=r.getRotatedGrid(),l=this.getHardDropY(p,f,c);return p.forEach((function(e,r){e.forEach((function(e,n){if(e){var p=s[l+r];if(p)p[f+n]&&(p[f+n]=new o.default(new a.default));var _=s[c+r];if(_)_[f+n]&&(_[f+n]=new o.default(t?new u.default:new i.default))}}))})),s},t.prototype.getHardDropY=function(t,e,r){for(var n=r;!this.doesTetrominoOverlap(t,e,n+1);)n+=1;return n},t.prototype.deactivateTetromino=function(){this.grid=this.getGrid(!0),delete this.activeTetromino},t.prototype.move=function(t){return!(!this.activeTetromino||!this.canMove(t))&&(this.activeTetromino.x+=t,!0)},t.prototype.softDrop=function(){return!!this.activeTetromino&&(this.canSoftDrop()?this.activeTetromino.y+=1:this.deactivateTetromino(),!0)},t.prototype.hardDrop=function(){if(this.activeTetromino){var t=this.activeTetromino,e=t.tetromino,r=t.x,n=t.y,o=e.getRotatedGrid();return this.activeTetromino.y=this.getHardDropY(o,r,n),this.deactivateTetromino(),!0}return!1},t.prototype.rotate=function(t){if(this.activeTetromino){var e=this.activeTetromino,r=e.tetromino,n=e.x,o=e.y,i=r.getRotatedGrid(t);if(!this.doesTetrominoOverlap(i,n,o))return this.activeTetromino.tetromino.rotation+=t,!0;if(!this.doesTetrominoOverlap(i,n,o-1))return this.activeTetromino.tetromino.rotation+=t,this.activeTetromino.y-=1,!0;var u=Math.max(n,0);if(n<5&&!this.doesTetrominoOverlap(i,u,o))return this.activeTetromino.tetromino.rotation+=t,this.activeTetromino.x=u,!0;if(!this.doesTetrominoOverlap(i,n-1,o))return this.activeTetromino.tetromino.rotation+=t,this.activeTetromino.x-=1,!0}return!1},t.prototype.setActiveTetromino=function(t){var e=t.startingRow;return this.activeTetromino={tetromino:t,x:4,y:e},!this.doesTetrominoOverlap(t.getRotatedGrid(),4,e)},t.prototype.canMove=function(t){var e=this.activeTetromino,r=e.tetromino,n=e.x,o=e.y;return!this.doesTetrominoOverlap(r.getRotatedGrid(),n+t,o)},t.prototype.canSoftDrop=function(){var t=this.activeTetromino,e=t.tetromino,r=t.x,n=t.y;return!this.doesTetrominoOverlap(e.getRotatedGrid(),r,n+1)},t.prototype.doesTetrominoOverlap=function(t,e,r){for(var n=0;n<t.length;n+=1)for(var o=0;o<t[n].length;o+=1)if(t[n][o]){var i=Math.max(r+n,0),u=this.grid[i];if(!u)return!0;var a=u[e+o];if(!a)return!0;if(a.contents)return!0}return!1},t}();e.default=f},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(t){this.contents=t}return t.prototype.text=function(){return this.contents?this.contents.text():" "},t}();e.default=n},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});e.__esModule=!0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.text=function(){return"X"},e}(r(2).default);e.default=i},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(){}return t.prototype.text=function(){return"☐"},t}();e.default=n},function(t,e,r){"use strict";e.__esModule=!0;var n=r(11),o=r(12),i=r(13),u=r(14),a=r(15),f=r(16),c=function(){function t(){this.queue=[];for(var e=0;e<4;e+=1)this.queue.push(new(t.getRandom()))}return t.getRandom=function(){var e=Math.floor(t.blocks.length*Math.random());return t.blocks[e]},t.prototype.pop=function(){return this.queue.push(new(t.getRandom())),this.queue.shift()},t.blocks=[n.default,o.default,i.default,u.default,a.default,f.default],t}();e.default=c},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});e.__esModule=!0;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.grid=[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],e.startingRow=-1,e}return o(e,t),e}(r(0).default);e.default=i},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});e.__esModule=!0;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.grid=[[1,0,0],[1,1,1],[0,0,0]],e.startingRow=0,e}return o(e,t),e}(r(4).default);e.default=i},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});e.__esModule=!0;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.grid=[[0,0,0],[1,1,1],[1,0,0]],e.startingRow=-1,e}return o(e,t),e}(r(4).default);e.default=i},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});e.__esModule=!0;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.grid=[[1,1],[1,1]],e.startingRow=0,e}return o(e,t),e}(r(1).default);e.default=i},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});e.__esModule=!0;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.grid=[[0,1,1],[1,1,0],[0,0,0]],e.startingRow=0,e}return o(e,t),e}(r(0).default);e.default=i},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});e.__esModule=!0;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.grid=[[1,1,0],[0,1,1],[0,0,0]],e.startingRow=0,e}return o(e,t),e}(r(0).default);e.default=i},function(t,e,r){"use strict";e.__esModule=!0,e.default={SPACE:32,NUM_0:48,NUM_1:49,NUM_2:50,NUM_3:51,NUM_4:52,NUM_5:53,NUM_6:54,NUM_7:55,NUM_8:56,NUM_9:57,SEMI_COLON:59,EQUALS:61,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUM_PAD_0:96,NUM_PAD_1:97,NUM_PAD_2:98,NUM_PAD_3:99,NUM_PAD_4:100,NUM_PAD_5:101,NUM_PAD_6:102,NUM_PAD_7:103,NUM_PAD_8:104,NUM_PAD_9:105,MULTIPLY:106,ADD:107,SEPARATOR:108,SUBTRACT:109,DECIMAL:110,DIVIDE:111,COMMA:188,PERIOD:190,SLASH:191,BACK_QUOTE:192,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRACKET:221,QUOTE:222,META:224,CANCEL:3,HELP:6,BACK_SPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,CONTEXT_MENU:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NUM_LOCK:144,SCROLL_LOCK:145}}]);